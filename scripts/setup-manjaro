#!/usr/bin/env bash

# Vers√£o experimental (em desenvolvimento)
# Objetivo: Instala√ß√£o automatizada de pacotes Manjaro

function installPackageIfNotInstalled() {
  local package=$1
  local command=${2:-$1}

  echo ""
  echo "> PACKAGE: '$package' ('$command')"

  if ! command -v $command &> /dev/null
  then
    echo "  ‚ùó N√£o instalado"
    echo "  üî® Instalando..."
    sudo pacman -Sy $package --noconfirm
    # echo "  ‚úÖ Feito!"
  else
    echo "  ‚òëÔ∏è  J√° instalado"
  fi
}

installPackageIfNotInstalled "alacritty"
installPackageIfNotInstalled "tmux"
installPackageIfNotInstalled "neovim" "nvim"
installPackageIfNotInstalled "neovide" # depende de nvim



# Desinstalar pacotes que vem na instalacao do manjaro

# thunderbird lollypop totem snapshot fragments yelp deja-dup collision endeavour manjaro-hello
# gnome-maps gnome-weather gnome-layout-swithcer gnome-tour gnome-clocks gnome-contacts

# Verificar uma maneira de n√£o dar erro se executar mais de uma vez
#sudo pacman -Rsun deja-dup --noconfirm



# CONFIGURA√áOES

# Git
echo "> Configura√ß√µes Git"
# - core.pager
git config --global core.pager ""
echo "  ‚úÖ core.pager configurado!"
# - core.editor
git config --global core.editor neovide
echo "  ‚úÖ core.editor configurado!"


# Manjaro
#echo "> Configurac√µes Manjaro"

# N√≠veis da bateria # /etc/UPower/UPower.conf

sudo cp /etc/UPower/UPower.conf /etc/UPower/UPower-BKP.conf

sudo sed -i 's/^PercentageLow=20/PercentageLow=6/' /etc/UPower/UPower.conf
sudo sed -i 's/^PercentageAction=2/PercentageAction=4/' /etc/UPower/UPower.conf
sudo sed -i 's/^CriticalPowerAction=HybridSleep/CriticalPowerAction=Hibernate/' /etc/UPower/UPower.conf

sudo systemctl restart upower.service

# Config cedilla
